C51 COMPILER V9.02   EEPROM                                                                04/12/2022 17:34:17 PAGE 1   


C51 COMPILER V9.02, COMPILATION OF MODULE EEPROM
OBJECT MODULE PLACED IN ..\output\eeprom.obj
COMPILER INVOKED BY: D:\Keil_v4\C51\BIN\C51.EXE ..\src\eeprom.c BROWSE INCDIR(..\inc) DEBUG OBJECTEXTEND PRINT(.\eeprom.
                    -lst) OBJECT(..\output\eeprom.obj)

line level    source

   1          /*********************************************************************************** 
   2          ;功能说明:STC89C52开机次数+数码管温度报警+1602时间
   3          ;文件名称:eeprom.c
   4          :描    述：EEPROM单字节读写操作,每次+1后写回
   5          ;版本号：v1.0.0  
   6          ;微处理器:STC89C52
   7          ;编译环境:Keil uVision V4.10 
   8          ;作    者:Cui Xinghai 
   9          ;创建日期:2022.4.9   
  10          ;***********************************************************************************/
  11          
  12          #include <reg52.h>
  13          #include "config.h"
  14          #include "I2C.h"
  15          
  16          
  17          /* 读取EEPROM中的一个字节，addr-字节地址 */
  18          unsigned char E2ReadByte(unsigned char addr)
  19          {
  20   1          unsigned char dat;
  21   1          
  22   1          I2CStart();
  23   1          I2CWrite(0x50<<1); //寻址器件，后续为写操作
  24   1          I2CWrite(addr);    //写入存储地址
  25   1          I2CStart();        //发送重复启动信号
  26   1          I2CWrite((0x50<<1)|0x01); //寻址器件，后续为读操作
  27   1          dat = I2CReadNAK();       //读取一个字节数据
  28   1          I2CStop();
  29   1          
  30   1          return dat;
  31   1      }
  32          /* 向EEPROM中写入一个字节，addr-字节地址 */
  33          void E2WriteByte(unsigned char addr, unsigned char dat)
  34          {
  35   1          I2CStart();
  36   1          I2CWrite(0x50<<1); //寻址器件，后续为写操作
  37   1          I2CWrite(addr);    //写入存储地址
  38   1          I2CWrite(dat);     //写入一个字节数据
  39   1          I2CStop();
  40   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     59    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       4
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
